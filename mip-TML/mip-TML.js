define(function(n){var e=n("customElement").create();return function(){var n,e=location.hostname.indexOf("kanzhun.com")>=0||location.hostname.indexOf("bosszhipin")>=0||location.hostname.indexOf("mip.kanzhun.com")>=0||location.hostname.indexOf(".zhipin.com")>=0||location.hostname.indexOf("nnhfg.com")>=0||location.hostname.indexOf("dianzhangzhipin")>=0,t=e?"t.kanzhun.com":"localhost:8088",o=(n=document.createElement("a"),function(e){return e?(n.href=e,n.hostname):""});function i(n,e){e=e||"&";var t=[];for(var o in n)t.push(encodeURIComponent(o)+"="+encodeURIComponent(n[o]));return t.join(e)}function r(n,e){var o=new Image,r=e.__a,a=Math.floor(e._/100);if(console.log(r,a),r&&a){for(var c=r+a,s=0,l=0;l<c.length;l++)s+=c.charCodeAt(l);e._=100*a+s%100}console.log("http://"+t+n+"?"+i(e)),o.src="http://mip.kanzhun.com"+n+"?"+i(e)}function a(n,e,t,o){console.log("----------------",n,e);var i="";if(t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3),i="; expires="+r.toGMTString()}t&&o&&c(n);var a=n+"="+e+i+"; path=/";o&&(a+=";domain="+o),document.cookie=a}function c(n){for(var e=n+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",t=[".kanzhun.com","www.kanzhun.com",".www.kanzhun.com","bosszhipin.kanzhun.com",".bosszhipin.kanzhun.com","m.kanzhun.com",".m.kanzhun.com","t.kanzhun.com",".t.kanzhun.com","wx.kanzhun.com",".wx.kanzhun.com"],o=0;o<t.length;o++)document.cookie=e+"domain="+t[o],document.cookie=e+"domain="+t[o]+"; path=/";document.cookie=e,document.cookie=e+"; path=/"}function s(n){for(var e=n+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null}function l(){return Math.round((new Date).getTime()/1e3)}function u(n){if(0==n.indexOf("http")){var e=n.indexOf("/",7);e>0&&(n=n.substr(e))}return n}var h=(new Date).getTime();function m(n,e){console.log("getParams"),console.log(n,e);var t=[f,p,g,"t","ab_t"];console.log(t);for(var i={},r=0;r<t.length;r++){var a=t[r],c=s(a);c&&(i[a]=c)}console.log(i);var m=document.referrer;if(console.log(m),m&&location.hostname==o(m)&&(m=u(m,location.hostname)),console.log(m),e)i.e=(new Date).getTime()-h;else if(console.log(11111),console.log(window.performance),window.performance&&window.performance.timing){var d=window.performance.timing;d.fetchStart&&(i.e=h-d.fetchStart)}i.r=m,i._=l();var v=document.getElementById("page_key_name");if(v&&(v=v.getAttribute("value"))&&(i.pk=v),n)for(var _ in n)i[_]=n[_];return console.log(i),i}var f="__a",d="__c",p="__l",g="__g",v=!1;function _(){if(console.log(v),!v){v=!0;var n=s(f),t=s(d);console.log("__a："+n,"__c："+t);var o=function(n,e){var t={};if(n){0===n.indexOf("%22")&&(n=n.substr(3,n.length-6));for(var o=n.split(e),i=0;i<o.length;i++){var r=o[i].split("=");2==r.length&&(t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]))}}return t}(s(p),"&");console.log(o);var r=l();t&&o.l||(o.l=u(location.href)),t||(o.r=document.referrer),t||(a(d,r),t=r+"");var c,h,m,_,w,k,z,b,x=function(n){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var o=e[t].split("=");if(2==o.length&&decodeURIComponent(o[0])==n)return decodeURIComponent(o[1])}return""}("sid"),O=!1;if(console.log(x),x?(x!==s(g)&&(O=!0),a(g,x),o.g=u(location.href)):(x=s(g))||a(g,x="-"),a(p,i(o,"&")),n&&8==n.split(".").length){var A=n.split(".");c=A[0],h=A[1],m=A[2],_=A[3],w=+A[4],k=+A[5],z=+A[6],b=+A[7],w+=1,_!=t?(m=_,_=t,k+=1,z=1):z+=1}else c=Math.floor(1e8*Math.random()),h=r,m="",_=t,w=1,k=1,z=1,b=0;O&&(b=0),n=[c,h,m,_,w,k,z,b+=1].join("."),e&&location.hostname.indexOf("kanzhun.com")>=0?a(f,n,3650,".kanzhun.com"):a(f,n,3650)}}function w(){console.log("统计页面PV"),_(),r("/_.gif",m())}function k(n,e,t,o){if(console.log(n,e,t,o),!n)throw"event track's label params is required";_();var i={ca:n};function a(n,e,t){(t=function(n){if(!n||0===n.indexOf("javascript"))return"";return n}(t))&&(n[e]=t)}a(i,"p1",e),a(i,"p2",t),a(i,"p3",o);var c=m(i,!0);console.error("错误统计"),console.log(c),r("/e.gif",c)}window._T;if(window._T={config:function(n){t=(n=n||{}).domain||t},sendPageView:w,sendEvent:k},w(),function(){var n=document.getElementsByTagName("impression");if(n.length){for(var e=[],t=0;t<n.length;)e.push(n[t].getAttribute("value")),t+=1;1==e.length?k("impression",e[0]):2==e.length?k("impression",e[0],e[1]):3==e.length&&k("impression",e[0],e[1],e[2])}}(),window.onerror=function(n,e,t,o,i){var r="",a=new Image;a.crossOrigin="Anonymous",r+="m="+encodeURIComponent(n)||"",r+="&su="+encodeURIComponent(e)||"",r+="&ln="+t||"",r+="&cn="+o||"",r+="&s="+(i&&encodeURIComponent(i.stack)),r+="&w="+document.documentElement.clientWidth,r+="&h="+document.documentElement.clientHeight,a.src="http://localhost:8088/e.gif?"+r},e){var z=s("t");z&&location.hostname&&(c("t"),a("t",z,3650))}}(),window.upp=function(n){this._url=n,this._init()},upp.prototype={_init:function(){this._params={};var n=this._url.split("#"),e=n[1];e&&(this._params.__anthor=e);var t=n[0].split("?"),o=0,i=[];if(this.host=t[0].replace(/#.+/,""),t.length>1)for(i=t[1].split("&");o<i.length;o++){var r=i[o].split("=");2===r.length&&this.add(r[0],r[1])}},add:function(n,e){return this._params[n]=e,this},remove:function(n){return delete this._params[n],this},contains:function(n,e){return void 0!==this._params[n]},update:function(n,e){this._params[n]=e},get:function(n){return this._params[n]},all:function(){return this._params},url:function(){var n=[],e="";for(var t in this._params)"__anthor"!==t?n.push(t+"="+this._params[t]):e="#"+this._params[t];return this.host+(n.length>0?"?":"")+n.join("&")+e}},function(){if(window._T){var n=document.getElementsByTagName("body")[0];n&&(t="click",o=function(n){for(var e=n.target||n.srcElement;e!==document&&e!==document.body&&!e.getAttribute("ka")&&!e.getAttribute("p2")&&!e.getAttribute("p3")&&e.parentNode;)e=e.parentNode;var t=e.getAttribute("ka"),o=e.getAttribute("p2"),i=e.getAttribute("p3")||"";if(t){var r=e.getAttribute("href")||"";if(r&&0!==r.indexOf("#")&&-1===r.indexOf("javascript:;")&&!e.getAttribute("noa")){var a=new window.upp(r),c=["bosszhipin.com","kanzhun.com","weizhipin.com"],s=c.length,l=!1;if(r.indexOf("http://")>=0||r.indexOf("https://")>=0){for(var u=0;u<s;u++)if(r.indexOf(c[u])>=0){l=!0;break}}else l=!0;l&&a.add("ka",encodeURIComponent(t)),e.setAttribute("href",a.url())}_T.sendEvent(t,"",o,i,r)}},(e=n).addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&(e["e"+t+o]=o,e.attachEvent("on"+t,function(){e["e"+t+o].call(e,window.event)})))}var e,t,o}(),e});